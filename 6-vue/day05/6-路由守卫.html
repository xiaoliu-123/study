<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>路由守卫</title>
    <script src="../js/vue-2.6.12.js"></script>
    <script src="../js/vue-router-3.4.3.js"></script>
</head>

<body>
    <div id="app">
        {{msg}}
        <!-- 4.使用路由 -->
        <div>
            <router-link to="/a/1">去A路由</router-link>
            <router-link to="/b">去B路由</router-link>
            <a href="#/a/2">a标签去A路由</a>
        </div>
        <div>
            <!-- 路由对象组件现实的位置 -->
            <router-view></router-view>
        </div>
    </div>
    <script>
        //声明组件
        let myA = {
            template: `
            <div>A组件</div>
            `,
            // 2.3设置组件内守卫
            beforeRouteEnter(to, from, next) {
                // //不！能！获取组件实例 `this`  this-->window
                console.log(this, 'beforeRouteEnter');
                next();
            },
            beforeRouteUpdate(to, from, next) {
                //this-->组件实例
                console.log(this, 'beforeRouteUpdate')
                next();
            },
            beforeRouteLeave(to, from, next) {
                //this-->组件实例
                console.log(this, 'beforeRouteLeave')
                next();
            }
        }
        let myB = {
            template: `
            <div>B组件</div>
            `
        }
        //1. 定义路由对象数组 route路由对象  router路由器对象  routes路由对象组
        let routes = [{
            path: '/a/:id',
            component: myA
        }, {
            path: '/b',
            component: myB,
            //2.2 设置路由独享守卫
            /* beforeEnter(to, from, next) {
                console.log(to, from, next, 'beforeEnter')
                next();
            } */
        }]
        //2.创建路由器对象
        let router = new VueRouter({
            routes: routes
        })

        //2.1设置全局路由前置/后置守卫
        //高级方法
        /* router.beforeEach((to, from, next) => {
            console.log(to, from, next, 'beforeEach');
            next();
        })
        router.afterEach((to, from) => {
            console.log(to, from, 'afterEach');
            if (to.path == '/a') {
                console.log('添加其他处理')
            }
        }) */

        //3.注册路由器对象
        new Vue({
            el: '#app',
            router: router,
            components: {
                "my-a": myA,
                "my-b": myB
            },
            data: {
                msg: 'hello'
            },
            methods: {},

        })
    </script>
</body>

</html>